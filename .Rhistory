library(foreign)
library(downloader)
setwd("C:/Users/anton_000/Documents/Downloads/Desktop/Replication")
url <- "http://www.aeaweb.org/aer/data/mar08/20050397_data.zip"
download(url,"datasur.dat", mode="wb")
ori <- unzip("datasur.dat")
mat <- matrix(ori)
data <- read.dta(mat[2,1])
shell.exec(file.path(getwd(), "readme.pdf"))
names <- names(data) #storing column names in "names" vector
classes <- rep(0, times=ncol(data)) # creating vector to store classes of data column
for(i in 1:ncol(data)) {classes[i] <- class(data[,i])} # for each column in data finding class storing it in vector "classes"
names #displaying names
classes# displaying classes
suppressWarnings(for(i in 1:14) {data[,i] <- as.integer(data[,i])}) # changing class of other variables to integer
suppressWarnings(for(i in 23:ncol(data)) {data[,i] <- as.integer(data[,i])}) # changing class of other variables to integer
data$anno <- as.Date(paste(as.character(data$anno),paste("01","01",sep="-"),sep="-"),"%Y-%m-%d") # changing class for anno variable to date
data$identif <- as.factor(data$identif) # indentif number is treated as factor
classes <- rep(0, times=ncol(data)) # creating vector to store classes of data column
for(i in 1:ncol(data)) {classes[i] <- class(data[,i])} # for each column in data finding class storing it in vector "classes"
classes # displaying classes
csur92 <- subset(data,ind92==1 & dip91!="." & dip91>0)
csur92$razd <- rep(0, times = nrow(csur92))
for(i in 1:nrow(csur92)){
if(csur92$d17_1[i]==3|csur92$d17_2[i]==3|csur92$d17_3[i]==3|csur92$d17_4[i]==3)
{csur92$razd[i]==1}
if(csur92$d17_1[i]==9&csur92$d17_2[i]==9&csur92$d17_3[i]==9&csur92$d17_4[i]==9)
{csur92$razd[i]==NA}
}
#csur92$razd <- as.factor(csur92$razd)
summary(csur92$razd)
a=subset(csur92,d17_1==3)
b=subset(a,d17_2==3)
b=subset(b,d17_3==3)
b=subset(b,d17_4==3)
summary(csur92$razd)
csur92$d17_1[1]
csur92$d17_1[154]
summary(csur92$d17_1)
grep("sales",colnames(csur92))
grep("sales",colnames(pav))
grep("pav",colnames(csur92))
install.packages("swirl")
library(swirl)
install_from_swirl("Getting and Cleaning Data")
swirl()
library(tidyr)
students
?gather
gather(students, sex, count, -grade)
students2
res <- gather(students2, sex_class, count, -grade)
res
?separate
separate(data = res, col = sex_class,c("sex", "class"))
submit()
submit()
students3
?gather
submit()
submit()
bye()
?spread
