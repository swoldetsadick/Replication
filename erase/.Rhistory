library(lubridate)
csur98 <- read.table("~/Downloads/Desktop/Replication/erase/erasecsur98.txt", header=TRUE, quote="\"")
csuro98 <- subset(csur98, year(csur98$anno) == 1997)
temp98 <- csuro98[,c(31, 35, 43, 45, 60)]
temp98 <- temp98[order(temp98$identif),]
csur01 <- read.table("~/Downloads/Desktop/Replication/erase/erasecsur01.txt", header=TRUE, quote="\"")
csuro01 <- subset(csur01, year(csur01$anno) == 2000)
temp01 <- csuro01[,c(40, 41, 43, 45, 60)]
temp01 <- temp01[order(temp01$identif),]
merge2 <- merge(temp98, temp01, by = c("identif"), all = TRUE)
merge2$eta98n <- merge2$eta01n - 3
merge2$diff <- merge2$eta01 - merge2$eta98
summary(as.factor(merge2$diff))
summary(as.factor(merge2$eta01))
summary(as.factor(merge2$eta01n))
summary(as.factor(merge2$eta98n))
summary(as.factor(merge2$eta98))
library(lubridate)
csur98 <- read.table("~/Downloads/Desktop/Replication/erase/erasecsur98.txt", header=TRUE, quote="\"")
csuro98 <- subset(csur98, year(csur98$anno) == 1997)
temp98 <- csuro98[,c(31, 35, 43, 45, 60)]
temp98 <- temp98[order(temp98$identif),]
csur01 <- read.table("~/Downloads/Desktop/Replication/erase/erasecsur01.txt", header=TRUE, quote="\"")
csuro01 <- subset(csur01, year(csur01$anno) == 2000)
temp01 <- csuro01[,c(40, 41, 43, 45, 60)]
temp01 <- temp01[order(temp01$identif),]
merge2 <- merge(temp98, temp01, by = c("identif"), all = TRUE)
merge2$eta98n <- merge2$eta01n - 3
merge2$diff <- merge2$eta01 - merge2$eta98
merge2$diff <- ifelse(is.na(merge2$diff), 1000, merge2$diff)
merge2$eta01 <- ifelse(is.na(merge2$eta01), 1000, merge2$eta01)
merge2$eta01n <- ifelse(is.na(merge2$eta01n), 1000, merge2$eta01n)
merge2$eta98 <- ifelse(is.na(merge2$eta98), 1000, merge2$eta98)
merge2$eta98n <- ifelse(is.na(merge2$eta98n), 1000, merge2$eta98n)
summary(as.factor(merge2$diff))
summary(as.factor(merge2$eta01))
summary(as.factor(merge2$eta01n))
summary(as.factor(merge2$eta98))
summary(as.factor(merge2$eta98n))
library(lubridate)
csur98 <- read.table("~/Downloads/Desktop/Replication/erase/erasecsur98.txt", header=TRUE, quote="\"")
csuro98 <- subset(csur98, year(csur98$anno) == 1997)
temp98 <- csuro98[,c(31, 35, 43, 45, 60)]
temp98 <- temp98[order(temp98$identif),]
csur01 <- read.table("~/Downloads/Desktop/Replication/erase/erasecsur01.txt", header=TRUE, quote="\"")
csuro01 <- subset(csur01, year(csur01$anno) == 2000)
temp01 <- csuro01[,c(40, 41, 43, 45, 60)]
temp01 <- temp01[order(temp01$identif),]
merge2 <- merge(temp98, temp01, by = c("identif"), all = TRUE)
merge2$eta98n <- merge2$eta01n - 3
merge2$diff <- merge2$eta01 - merge2$eta98
merge2$diff <- ifelse(is.na(merge2$diff), 1000, merge2$diff)
merge2$eta01 <- ifelse(is.na(merge2$eta01), 1000, merge2$eta01)
merge2$eta01n <- ifelse(is.na(merge2$eta01n), -1000, merge2$eta01n)
merge2$eta98 <- ifelse(is.na(merge2$eta98), 1000, merge2$eta98)
merge2$eta98n <- ifelse(is.na(merge2$eta98n), -1000, merge2$eta98n)
merge2$eta98 <- ifelse(merge2$diff != 3 & merge2$eta01 == merge2$eta01n & !is.na(merge2$eta98n) & merge2$eta98n >= 0, merge2$eta98n, merge2$eta98)
merge2$eta01 <- ifelse(merge2$diff != 3 & merge2$eta98 == merge2$eta98n & !is.na(merge2$eta01n) & merge2$eta01n >= 0, merge2$eta01n, merge2$eta01)
merge2$eta98 <- ifelse((merge2$eta98 == 1000 | merge2$eta98 < 0) & merge2$eta01 != 1000, merge2$eta98 + 3, merge2$eta01)
merge2$eta01 <- ifelse((merge2$eta01 == 1000 | merge2$eta01 < 0) & merge2$eta98 != 1000, merge2$eta98 + 3, merge2$eta01)
merge <- read.dta("C:/Users/anton_000/Documents/Downloads/Desktop/compare/maka.dta")
summary(merge$eta98)
summary(merge2$eta98)
a <- subset(merge2, eta98 >= 1000)
summary(a$eta98)
a <- subset(merge2, eta98 <= 1000)
summary(a$eta98)
a <- subset(merge2, eta98 < 1000)
summary(a$eta98)
a <- subset(merge2, eta98 >= 1000)
